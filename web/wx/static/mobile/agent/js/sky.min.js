!function(t,e,o){var n,i,r=document.documentElement;(i=function(){n=r.clientWidth,(o||!o&&(o=640))&&n>o&&(n=o),r.style.fontSize=.15625*n+"px"})(),window.addEventListener("resize",i,!1)}(0,0,380),function(t,e){"use strict";function o(t){return"function"==typeof t}function n(o,i){var r=null;return(i=i||t.document)===t.document?r=e(o):0===(r=e(o,i)).length&&(r=n(o,t.document)),r}function i(t){var e=t;return{show:function(t){e.onAfterShow(t),e.$container.fadeIn(e.opts.duration),e.$mask.stop(!0).fadeIn(e.opts.duration,function(){e.excuteStack(e.stackAfterShow)})},hide:function(t){e.onAfterHide(t),e.$container.fadeOut(e.opts.duration),e.$mask.stop(!0).fadeOut(e.opts.duration,function(){e.excuteStack(e.stackAfterHide)})}}}function r(t,o){var i=this;i.opts=e.extend(!0,{},r.defaultOpts,o||{}),i.$container=e(t),i.$btnTrigger=e(i.opts.btnTrigger),i.$btnClose=n(i.opts.btnClose,i.$container),i.$mask=r.mask,i.isVisible=!1,i.onBeforeShow(i.opts.onBeforeShow),i.onAfterShow(i.opts.onAfterShow),i.onBeforeHide(i.opts.onBeforeHide),i.onAfterHide(i.opts.onAfterHide),i.initialize()}var s=Array.prototype.slice;r.prototype.initialize=function(){var t=this;switch(t.opts.effect){case"fade":t.effect=i(t);default:t.effect=i(t)}t.initEvents()},r.prototype.initEvents=function(){var t=this;t.$btnTrigger.on("click",function(){t.show()}),t.$btnClose.on("click",function(){t.hide()})},r.prototype.show=function(t){r.refer&&r.refer.isVisible&&r.refer.hide();var e=r.refer=this;if(e.isVisible=!0,r.hasMask||e.appendMask(),!1!==e.excuteStack(e.stackBeforeShow))return e.effect.show(t),this},r.prototype.hide=function(t){var e=this;if(e.isVisible=!1,!1!==e.excuteStack(e.stackBeforeHide))return e.effect.hide(t),this},r.prototype.appendMask=function(){var t=this;r.hasMask=!0,t.$mask.addClass(t.opts.mask).appendTo("body"),t.$mask.on("click",function(){r.refer.hide()})},r.prototype.excuteStack=function(t){for(var e=s.call(arguments).slice(1),o=0;o<t.length;o++)if(!1===t[o].apply(this,e))return!1},r.prototype.onBeforeShow=function(t){var e=this;return e.stackBeforeShow||(e.stackBeforeShow=[]),o(t)&&e.stackBeforeShow.push(t),this},r.prototype.onAfterShow=function(t){var e=this;return e.stackAfterShow||(e.stackAfterShow=[]),o(t)&&e.stackAfterShow.push(t),this},r.prototype.onBeforeHide=function(t){var e=this;return e.stackBeforeHide||(e.stackBeforeHide=[]),o(t)&&e.stackBeforeHide.push(t),this},r.prototype.onAfterHide=function(t){var e=this;return e.stackAfterHide||(e.stackAfterHide=[]),o(t)&&e.stackAfterHide.push(t),this},r.refer=null,r.hasMask=!1,r.mask=e("<div/>"),r.defaultOpts={effect:"fade",btnTrigger:null,btnClose:null,duration:300,mask:"popup-mask",onBeforeShow:null,onAfterShow:null,onBeforeHide:null,onAfterHide:null},e.fn.skyPopup=function(t){if(0===this.length){var e=this.selector||"popup";throw new Error("'"+e+"' is not exist！！！")}return new r(this[0],t)}}(window,jQuery);